<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>정적 팩토리 메소드 | EK Dev Blog</title>
<meta name=keywords content><meta name=description content='서론 단위테스트의 목데이터를 만들때 생성자를 호출하게되어 연관관계를 갖는 도메인을 setter로 설정시켜서 목데이터를 생성하는데 점점 무거워지는 불편함을 겪었습니다.
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Test void 신규_임시예약상태의_예약도메인_생성에_성공된다() { // given long userId = 1L; long concertSeatId = 1L; User user = new User(userId, "은강"); Concert concert = new Concert(1L, "항해와 함께하는 TDD 단위테스트 콘서트", "항해플러스"); // 👈 도메인 엔티티 생성자를 직접호출!'><meta name=author content><link rel=canonical href=https://loveAlakazam.github.io/blog/docs/factory-methods/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://loveAlakazam.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://loveAlakazam.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://loveAlakazam.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://loveAlakazam.github.io/blog/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://loveAlakazam.github.io/blog/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://loveAlakazam.github.io/blog/docs/factory-methods/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://loveAlakazam.github.io/blog/docs/factory-methods/"><meta property="og:site_name" content="EK Dev Blog"><meta property="og:title" content="정적 팩토리 메소드"><meta property="og:description" content='서론 단위테스트의 목데이터를 만들때 생성자를 호출하게되어 연관관계를 갖는 도메인을 setter로 설정시켜서 목데이터를 생성하는데 점점 무거워지는 불편함을 겪었습니다.
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Test void 신규_임시예약상태의_예약도메인_생성에_성공된다() { // given long userId = 1L; long concertSeatId = 1L; User user = new User(userId, "은강"); Concert concert = new Concert(1L, "항해와 함께하는 TDD 단위테스트 콘서트", "항해플러스"); // 👈 도메인 엔티티 생성자를 직접호출!'><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-04-13T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-13T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="정적 팩토리 메소드"><meta name=twitter:description content='서론 단위테스트의 목데이터를 만들때 생성자를 호출하게되어 연관관계를 갖는 도메인을 setter로 설정시켜서 목데이터를 생성하는데 점점 무거워지는 불편함을 겪었습니다.
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Test void 신규_임시예약상태의_예약도메인_생성에_성공된다() { // given long userId = 1L; long concertSeatId = 1L; User user = new User(userId, "은강"); Concert concert = new Concert(1L, "항해와 함께하는 TDD 단위테스트 콘서트", "항해플러스"); // 👈 도메인 엔티티 생성자를 직접호출!'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Docs","item":"https://loveAlakazam.github.io/blog/docs/"},{"@type":"ListItem","position":2,"name":"정적 팩토리 메소드","item":"https://loveAlakazam.github.io/blog/docs/factory-methods/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"정적 팩토리 메소드","name":"정적 팩토리 메소드","description":"서론 단위테스트의 목데이터를 만들때 생성자를 호출하게되어 연관관계를 갖는 도메인을 setter로 설정시켜서 목데이터를 생성하는데 점점 무거워지는 불편함을 겪었습니다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Test void 신규_임시예약상태의_예약도메인_생성에_성공된다() { // given long userId = 1L; long concertSeatId = 1L; User user = new User(userId, \u0026#34;은강\u0026#34;); Concert concert = new Concert(1L, \u0026#34;항해와 함께하는 TDD 단위테스트 콘서트\u0026#34;, \u0026#34;항해플러스\u0026#34;); // 👈 도메인 엔티티 생성자를 직접호출!","keywords":[],"articleBody":"서론 단위테스트의 목데이터를 만들때 생성자를 호출하게되어 연관관계를 갖는 도메인을 setter로 설정시켜서 목데이터를 생성하는데 점점 무거워지는 불편함을 겪었습니다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 @Test void 신규_임시예약상태의_예약도메인_생성에_성공된다() { // given long userId = 1L; long concertSeatId = 1L; User user = new User(userId, \"은강\"); Concert concert = new Concert(1L, \"항해와 함께하는 TDD 단위테스트 콘서트\", \"항해플러스\"); // 👈 도메인 엔티티 생성자를 직접호출! ConcertDate concertDate = new ConcertDate(1L, LocalDate.now(), true, \"뚝섬 한강공원\"); // 👈 연관관계 도메인엔티티 생성자를 직접호출! ConcertSeat concertSeat = new ConcertSeat(concertSeatId, 5, 15000, true); // 👈 연관관계 도메인엔티티 생성자를 직접호출! concertSeat.setConcert(concert); // 👈 문제의 setter! concertSeat.setConcertDate(concertDate); // 👈 문제의 setter! // when \u0026 then Reservation result = assertDoesNotThrow(() -\u003e reservationService.initTemporaryReservedStatus(user, concertSeat)); assertEquals(null, result.getReservedAt()); assertEquals(PENDING_PAYMENT, result.getStatus()); assertEquals(user, result.getUser()); assertEquals(concert, result.getConcert()); assertEquals(concertDate, result.getConcertDate()); assertEquals(concertSeat, result.getConcertSeat()); } 목데이터를 나타낼때마다 뚱뚱해지는 코드길이와, 목데이터를 셋팅하는데 계속 new 연산자로 생성자를 호출해야되는걸까? 라는 의구심이 들었습니다. 엔티티와 연결된 도메인이 1개면 생성자호출,setter 로 코드라인 2줄을 차지하는데, 만일 연결된 도메인이 10개라면 코드라인수가 20개를 차지해서 테스트코드를 작성하는데 큰 불편함을 겪었습니다. 만일 위의 문제의 코드처럼 진행된다면 연결 도메인개수가 늘어날수록 작성해야되는 테스트코드도 방대해진다는 결론을 내렸습니다.\n이에 대한 내용으로 코치님께 리뷰포인트로 질문을 했고 그에 대한 답변을 받았습니다. 도메인 모델이 자신의 정보를 관리하지 않고 외부에서 변경이 가능할 경우 책임의 경계가 바깥까지 확장될 수 있기 때문에 “정적 팩토리 메서드” 로 접근을 하는게 좋다고 하셨습니다.\n하지만 저는 ‘정적 팩터리 메서드’ 가 무엇인지 들어봤지만 그 용어의 정의를 모른 상태였습니다. 직접 검색을하며 학습을 할 수 밖에 없었습니다.\n정적 팩토리 메소드 정적 팩토리 메서드(Static Factory Method)는 객체의 생성을 담당하는 클래스 메서드 입니다. new 연산자를 직접 사용하지 않고도 클래스 내에서 선언되어 있는 메서드를 통해서 내부의 new 연산자를 이용하여 객체를 생성해서 반환하는 것을 의미합니다.\n저는 이펙티브 자바 책을 읽지 않았지만, 참고블로그의 작성자는 이펙티브 자바 도서를 근거하여 new 연산자를 사용할 때보다 정적 팩토리 메서드를 사용할 때 얻게되는 장점이 있습니다.\n이름을 가질 수 있다. 호출 될때마다 인스턴스를 새로 생성하지 않아도 된다. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다. 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다. 정적 팩토리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다. (1) 이름을 가질 수 있다 객체지향 프로그래밍에서는 객체는 자신에게 주어진 행동, 역할, 책임을 갖고 있습니다. 객체 자신의 역할을 수행하기 위해서 객체 생성시 역할 수행이라는 생성 목적에 따라 생성자를 구별해서 사용합니다. 이때 new 연산자를 이용하여 객체를 생성하게 되면 프로그래머는 해당 생성자의 내부 구조를 알고 있어야 목적에 맞게 객체를 생성할 수 있습니다.\n하지만 정적팩토리 메소드를 사용하게되면 메소드 네이밍에 따라 반환될 객체들의 특성을 묘사할 수 있습니다. 메소드명에 따라 코드의 가독성이 상승하는 장점을 갖습니다.\n(2) 호출할 때 마다 새로운 객체를 생성할 필요가 없다 생성자를 통해서 객체를 만드는 경우 초기화 값이 동일하더라도 인스턴스 주소가 전부 다른 현상이 있습니다. 즉 호출할 때마다 매번 서로다른 인스턴스 주소를 가진 객체가 생성됩니다.\n정적 팩토리 메소드를 사용하게되면 여러번 호출하더라도 동일한 인스턴스 주소로 나타낼 수 있습니다. 즉 정적팩토리 메소드와 캐싱구조를 함께 사용하면 매번 객체를 새롭게 만들 필요가 없어집니다.\n(3) 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다 생성자를 사용하게되면 생성되는 객체의 클래스가 하나로 고정됩니다. 하지만 정적 팩토리 메소드를 사용하게되면 반환할 객체의 클래스를 자유롭게 선택할 수 있는 유연성을 가지게됩니다. 정적 팩토리 메소드를 사용하게되면 객체를 생성할때 분기처리를 통해서 하위 타입의 객체를 반환할 수 있습니다.\n(4) 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환 할 수 있다 인스턴스를 서로 다르게 반환하는 기능을 추가하고 싶다면, 매개변수에 따라 다른 클래스의 인스턴스를 반환해주면 됩니다.\n(5) 정적 팩토리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다 서비스 제공자 프레임워크와 JDBC 를 만드는 근간이기도하고, 구현체가 전혀 존재하지 않아도 인터페이스만으로 정적 팩토리 메소드를 작성할 수 있습니다.\n정적 팩토리 메소드의 단점 상속에는 public 혹은 protected 생성자가 필요하므로 정적 팩토리 메소드만 제공할 경우 상속이 불가능하다. 다른 개발자들이 정적팩토리 메소드를 찾기가 어렵다 정적 팩토리 메소드 네이밍 단점2를 보완하기 위해서 널리 알려진 규약을 통해서 정적 팩토리 메소드를 명명하는 것이 좋습니다. 이펙티브 자바에서 소개하는 정적 팩토리 메소드 네이밍 컨벤션은 아래와 같습니다.\nfrom 매개변수 하나를 받아서 해당 타입의 인스턴스를 반환하는 형변환 메소드\n1 Date d = Date.from(instant); of 여러 매개변수를 받아서 적합한 타입의 인스턴스를 반환하는 집계 메소드\n1 Set\u003cRank\u003e pockerCards = EnumSet.of(JACK, QUEEN, KING); valueOf from 과 of 의 더 자세한 버젼\n1 BigInteger prime = BigInteger.valueOf(Integer.MAX_VALUE); instance 혹은 getInstance 1 StackWalker luke = StackWalker.getInstance(options); create 혹은 newInstance instance 혹은 getInstance 와 비슷하지만, 매번 새로운 인스턴스를 생성하여 반환함을 보장합니다.\n1 Object newArray = Array.create(classObject, arrayLen); getType getInstance 와 같으나, 현재 클래스가 아닌 다른 클래스의 인스턴스를 생성할 때 사용합니다. Type은 팩토리 메소드가 반활할 객체 타입을 적습니다.\n1 FileStore fs = Files.getFileStore(path); newType createInstance 와 같으나, 현재 클래스가 아닌 다른 클래스의 인스턴스를 생성할 때 사용합니다. Type은 팩토리 메소드가 반활할 객체 타입을 적습니다.\n1 BufferedReader br = Files.newBufferedReader(path); type getType 과 newType 의 간결한 버젼입니다.\n1 List\u003cComplaint\u003e litany = Collections.list(legacyLitany); 참고 cjh8746.log - 정적 팩토리 메소드 Abel - 정적 팩토리 메소드 Hudi - 정적 팩토리 메소드 인파 - 정적 팩토리 메소드 정적 팩토리 메소드를 사용하여 코드를 개선해보자 정적팩토리 메소드를 이용하여 샘플데이터 생성 코드 개선\n샘플데이터 생성: 정적팩토리 메소드를 이용하여 콘서트와 콘서트일정, 콘서트좌석 을 초기화 해주는 코드 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 // Concert.java @Entity @Getter @Table(name =\"concerts\") @RequiredArgsConstructor public class Concert extends BaseEntity { @Builder private Concert(String name, String artistName) { this.name = name; this.artistName = artistName; } public static Concert of(String name, String artistName) { if(EmptyStringValidator.isEmptyString(name)) throw new BusinessException(SHOULD_NOT_EMPTY); if(EmptyStringValidator.isEmptyString(artistName)) throw new BusinessException(SHOULD_NOT_EMPTY); return Concert.builder() .name(name) .artistName(artistName) .build(); } public static Concert create(String name, String artistName, LocalDate progressDate, String place, long price) { ...(유효성 검증로직 생략) // 콘서트 생성 Concert concert = Concert.of(name, artistName); // 👈 정적팩토리 메소드 활용 concert.addConcertDate(progressDate, place, price); // 👈 연관객체 ConcertDate 생성 return concert; } public void addConcertDate(LocalDate progressDate, String place, long price) { ...(유효성 검증로직 생략) // 공연날짜 정보 추가 ConcertDate newConcertDate = ConcertDate.of( this, progressDate, true, place ); // 👈 정적팩토리 메소드 활용 // 해당날짜의 좌석 50개 초기화 newConcertDate.initializeSeats(this, price); // 리스트에 날짜정보 추가 this.dates.add(newConcertDate); } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 // ConcertDate.java @Entity @Getter @Table(name =\"concert_dates\") @RequiredArgsConstructor public class ConcertDate extends BaseEntity { @Builder private ConcertDate(Concert concert, LocalDate progressDate, boolean isAvailable, String place) { this.concert = concert; this.progressDate = progressDate; this.isAvailable = isAvailable; this.place = place; } public static ConcertDate of(Concert concert, LocalDate progressDate, boolean isAvailable, String place) { if(concert == null) throw new BusinessException(NOT_NULLABLE); if(progressDate == null) throw new BusinessException(NOT_NULLABLE); if(EmptyStringValidator.isEmptyString(place)) throw new BusinessException(SHOULD_NOT_EMPTY); return ConcertDate.builder() .concert(concert) .progressDate(progressDate) .isAvailable(isAvailable) .place(place) .build(); } public void initializeSeats(Concert concert, long price) { // 콘서트 좌석 50개를 만든다 for(int seatNumber = MIN_SEAT_NUMBER; seatNumber \u003c= MAX_SEAT_NUMBER ; seatNumber++) { ConcertSeat concertSeat = ConcertSeat.of(concert, this, seatNumber, price , true); this.seats.add(concertSeat); } } } 정적팩토리 메소드를 호출하여 샘플테스트 데이터셋을 쉽게 만들 수 있다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 // 테스트코드 @Test void 임시예약이_유효한상태에서_예약확정을_요청하면_상태변경에_성공된다() { // given User user = User.of(\"테스트\"); // 👈 정적팩토리메소드를 사용하여 테스트를 위한 유저 데이터 생성 및 초기화 Concert concert = Concert.create( // 👈 정적팩토리 메소드를 활용하여 테스트를 위한 콘서트/콘서트일정/콘서트좌석 데이터 생성 및 초기화 \"테스트 콘서트\", \"테스트 아티스트\", LocalDate.now(), \"테스트 장소\", 15000 ); ConcertDate concertDate = concert.getDates().get(0); ConcertSeat concertSeat = concertDate.getSeats().get(0); assertTrue(concertSeat.isAvailable()); // 해당좌석은 예약가능 log.info(\"해당 좌석 임시예약 상태로 변경\"); long reservationId = 1L; Reservation reservation = Reservation.of( // 👈 정적팩토리메소드를 사용하여 테스트를 위한 예약 데이터 생성 user, concert, concertDate, concertSeat ); assertDoesNotThrow(()-\u003e reservation.temporaryReserve()); assertTrue(reservation.isTemporary()); // 임시예약상태 when(reservationRepository.findById(reservationId)).thenReturn(reservation); // when log.info(\"when: 임시예약이 유효일자가 만료된 상태에서 예약확정 상태로 변경을 요청한다\"); ReservationInfo.Confirm info = assertDoesNotThrow( () -\u003e reservationService.confirm(ReservationCommand.Confirm.of(reservationId)) ); // then assertTrue(info.reservation().isConfirm()); // 예약확정상태인지 확인 assertEquals(ReservationStatus.CONFIRMED, info.reservation().getStatus()); assertNotNull(info.reservation().getReservedAt()); assertNull(info.reservation().getTempReservationExpiredAt()); assertFalse(concertSeat.isAvailable()); // 좌석은 예약불가능 상태인지 확인 } 컨트롤러-\u003e서비스로 계층별 DTO로 전환시켜서 전달\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 @RestController @RequestMapping(\"concerts\") @RequiredArgsConstructor public class ConcertController implements ConcertApiDocs { private final ConcertService concertService; // 콘서트의 예약가능 날짜 목록조회 @GetMapping(\"/{id}/dates/list\") public ResponseEntity\u003cApiResponse\u003cConcertResponse.GetAvailableConcertDates\u003e\u003e getAvailableConcertDates( @PathVariable(\"id\") long id, @RequestParam(value = \"page\", required = false, defaultValue = \"1\") int page ) { // 리스트를 반환 ConcertInfo.GetConcertDateList info = concertService.getConcertDateList(ConcertCommand.GetConcertDateList.of(id)); // 👈 정적팩토리 메소드를 사용 // 페이징처리를 한다 Page\u003cConcertDate\u003e concertDatePage = PaginationUtils.toPage(info.concertDates(), page); // 페이징처리 결과를 응답데이터에 넣고 응답한다 return ApiResponseEntity.ok(ConcertResponse.GetAvailableConcertDates.from(concertDatePage)); // 👈 정적팩토리 메소드를 사용 } } 결론 객체는 각자 책임과 역할을 갖고 있습니다. 목적에 맞게 객체의 책임과 역할을 활용하려면 객체의 생성이 필요합니다. 하지만 생성자를 호출하게되면 서론에서 소개한 문제처럼 객체가 필요할 때마다 new 연산자로 생성자를 직접 호출하게되면 생성자 호출로인해서 코드의 가독성이 떨어지게되는걸 직접 경험해봤습니다.\n각 도메인이 갖는 책임과 역할을 객체지향스럽게 해야된다면 이펙티브자바 도서를 한번쯤은 읽어보고, 읽은 내용을 바탕으로 예제코드를 작성하면서 나만의 언어로 정의하는 연습을 해봐야될 거 같습니다.\n","wordCount":"1468","inLanguage":"en","datePublished":"2025-04-13T00:00:00Z","dateModified":"2025-04-13T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://loveAlakazam.github.io/blog/docs/factory-methods/"},"publisher":{"@type":"Organization","name":"EK Dev Blog","logo":{"@type":"ImageObject","url":"https://loveAlakazam.github.io/blog/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://loveAlakazam.github.io/blog/ accesskey=h title="EK Dev Blog (Alt + H)"><img src=https://loveAlakazam.github.io/apple-touch-icon.png alt aria-label=logo height=35>EK Dev Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://eunkangchoi.github.io/resume/ title=Resume><span>Resume</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://loveAlakazam.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://loveAlakazam.github.io/blog/docs/>Docs</a></div><h1 class="post-title entry-hint-parent">정적 팩토리 메소드</h1><div class=post-meta><span title='2025-04-13 00:00:00 +0000 UTC'>April 13, 2025</span></div></header><div class=post-content><h2 id=서론>서론<a hidden class=anchor aria-hidden=true href=#서론>#</a></h2><p>단위테스트의 목데이터를 만들때 생성자를 호출하게되어 연관관계를 갖는 도메인을 setter로 설정시켜서 목데이터를 생성하는데 점점 무거워지는 불편함을 겪었습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>void</span><span class=w> </span><span class=nf>신규_임시예약상태의_예약도메인_생성에_성공된다</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// given</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>long</span><span class=w> </span><span class=n>userId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1L</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>long</span><span class=w> </span><span class=n>concertSeatId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1L</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=s>&#34;은강&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Concert</span><span class=w> </span><span class=n>concert</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Concert</span><span class=p>(</span><span class=n>1L</span><span class=p>,</span><span class=w> </span><span class=s>&#34;항해와 함께하는 TDD 단위테스트 콘서트&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;항해플러스&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 도메인 엔티티 생성자를 직접호출!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ConcertDate</span><span class=w> </span><span class=n>concertDate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcertDate</span><span class=p>(</span><span class=n>1L</span><span class=p>,</span><span class=w> </span><span class=n>LocalDate</span><span class=p>.</span><span class=na>now</span><span class=p>(),</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w> </span><span class=s>&#34;뚝섬 한강공원&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 연관관계 도메인엔티티 생성자를 직접호출!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ConcertSeat</span><span class=w> </span><span class=n>concertSeat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcertSeat</span><span class=p>(</span><span class=n>concertSeatId</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>,</span><span class=w> </span><span class=n>15000</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 연관관계 도메인엔티티 생성자를 직접호출!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>concertSeat</span><span class=p>.</span><span class=na>setConcert</span><span class=p>(</span><span class=n>concert</span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 문제의 setter!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>concertSeat</span><span class=p>.</span><span class=na>setConcertDate</span><span class=p>(</span><span class=n>concertDate</span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 문제의 setter!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// when &amp; then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Reservation</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>assertDoesNotThrow</span><span class=p>(()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>reservationService</span><span class=p>.</span><span class=na>initTemporaryReservedStatus</span><span class=p>(</span><span class=n>user</span><span class=p>,</span><span class=w> </span><span class=n>concertSeat</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>assertEquals</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=na>getReservedAt</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>assertEquals</span><span class=p>(</span><span class=n>PENDING_PAYMENT</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=na>getStatus</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>assertEquals</span><span class=p>(</span><span class=n>user</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=na>getUser</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>assertEquals</span><span class=p>(</span><span class=n>concert</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=na>getConcert</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>assertEquals</span><span class=p>(</span><span class=n>concertDate</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=na>getConcertDate</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>assertEquals</span><span class=p>(</span><span class=n>concertSeat</span><span class=p>,</span><span class=w> </span><span class=n>result</span><span class=p>.</span><span class=na>getConcertSeat</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>목데이터를 나타낼때마다 뚱뚱해지는 코드길이와, 목데이터를 셋팅하는데 계속 new 연산자로 생성자를 호출해야되는걸까? 라는 의구심이 들었습니다.
엔티티와 연결된 도메인이 1개면 생성자호출,setter 로 코드라인 2줄을 차지하는데, 만일 연결된 도메인이 10개라면 코드라인수가 20개를 차지해서 테스트코드를 작성하는데 큰 불편함을 겪었습니다. 만일 위의 문제의 코드처럼 진행된다면 연결 도메인개수가 늘어날수록 작성해야되는 테스트코드도 방대해진다는 결론을 내렸습니다.</p><p>이에 대한 내용으로 코치님께 리뷰포인트로 질문을 했고 그에 대한 답변을 받았습니다.
도메인 모델이 자신의 정보를 관리하지 않고 외부에서 변경이 가능할 경우 책임의 경계가 바깥까지 확장될 수 있기 때문에 &ldquo;정적 팩토리 메서드&rdquo; 로 접근을 하는게 좋다고 하셨습니다.</p><p>하지만 저는 &lsquo;정적 팩터리 메서드&rsquo; 가 무엇인지 들어봤지만 그 용어의 정의를 모른 상태였습니다.
직접 검색을하며 학습을 할 수 밖에 없었습니다.</p><hr><h2 id=정적-팩토리-메소드>정적 팩토리 메소드<a hidden class=anchor aria-hidden=true href=#정적-팩토리-메소드>#</a></h2><p>정적 팩토리 메서드(Static Factory Method)는 객체의 생성을 담당하는 클래스 메서드 입니다.
<code>new</code> 연산자를 직접 사용하지 않고도 클래스 내에서 선언되어 있는 메서드를 통해서 내부의 <code>new</code> 연산자를 이용하여 객체를 생성해서 반환하는 것을 의미합니다.</p><p>저는 이펙티브 자바 책을 읽지 않았지만, 참고블로그의 작성자는 이펙티브 자바 도서를 근거하여
new 연산자를 사용할 때보다 정적 팩토리 메서드를 사용할 때 얻게되는 장점이 있습니다.</p><ul><li><ol><li>이름을 가질 수 있다.</li></ol></li><li><ol start=2><li>호출 될때마다 인스턴스를 새로 생성하지 않아도 된다.</li></ol></li><li><ol start=3><li>반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.</li></ol></li><li><ol start=4><li>입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.</li></ol></li><li><ol start=5><li>정적 팩토리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.</li></ol></li></ul><h3 id=1-이름을-가질-수-있다>(1) 이름을 가질 수 있다<a hidden class=anchor aria-hidden=true href=#1-이름을-가질-수-있다>#</a></h3><p>객체지향 프로그래밍에서는 객체는 자신에게 주어진 행동, 역할, 책임을 갖고 있습니다.
객체 자신의 역할을 수행하기 위해서 객체 생성시 역할 수행이라는 생성 목적에 따라 생성자를 구별해서 사용합니다.
이때 new 연산자를 이용하여 객체를 생성하게 되면 프로그래머는 해당 생성자의 내부 구조를 알고 있어야 목적에 맞게 객체를 생성할 수 있습니다.</p><p>하지만 정적팩토리 메소드를 사용하게되면 메소드 네이밍에 따라 반환될 객체들의 특성을 묘사할 수 있습니다.
메소드명에 따라 코드의 가독성이 상승하는 장점을 갖습니다.</p><h3 id=2-호출할-때-마다-새로운-객체를-생성할-필요가-없다>(2) 호출할 때 마다 새로운 객체를 생성할 필요가 없다<a hidden class=anchor aria-hidden=true href=#2-호출할-때-마다-새로운-객체를-생성할-필요가-없다>#</a></h3><p>생성자를 통해서 객체를 만드는 경우 초기화 값이 동일하더라도 인스턴스 주소가 전부 다른 현상이 있습니다.
즉 호출할 때마다 매번 서로다른 인스턴스 주소를 가진 객체가 생성됩니다.</p><p>정적 팩토리 메소드를 사용하게되면 여러번 호출하더라도 동일한 인스턴스 주소로 나타낼 수 있습니다.
즉 정적팩토리 메소드와 캐싱구조를 함께 사용하면 매번 객체를 새롭게 만들 필요가 없어집니다.</p><h3 id=3-반환-타입의-하위-타입-객체를-반환할-수-있는-능력이-있다>(3) 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다<a hidden class=anchor aria-hidden=true href=#3-반환-타입의-하위-타입-객체를-반환할-수-있는-능력이-있다>#</a></h3><p>생성자를 사용하게되면 생성되는 객체의 클래스가 하나로 고정됩니다. 하지만 정적 팩토리 메소드를 사용하게되면 반환할 객체의 클래스를 자유롭게 선택할 수 있는 유연성을 가지게됩니다. 정적 팩토리 메소드를 사용하게되면 객체를 생성할때 분기처리를 통해서 하위 타입의 객체를 반환할 수 있습니다.</p><h3 id=4-입력-매개변수에-따라-매번-다른-클래스의-객체를-반환-할-수-있다>(4) 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환 할 수 있다<a hidden class=anchor aria-hidden=true href=#4-입력-매개변수에-따라-매번-다른-클래스의-객체를-반환-할-수-있다>#</a></h3><p>인스턴스를 서로 다르게 반환하는 기능을 추가하고 싶다면, 매개변수에 따라 다른 클래스의 인스턴스를 반환해주면 됩니다.</p><h3 id=5-정적-팩토리-메서드를-작성하는-시점에는-반환할-객체의-클래스가-존재하지-않아도-된다>(5) 정적 팩토리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다<a hidden class=anchor aria-hidden=true href=#5-정적-팩토리-메서드를-작성하는-시점에는-반환할-객체의-클래스가-존재하지-않아도-된다>#</a></h3><p>서비스 제공자 프레임워크와 JDBC 를 만드는 근간이기도하고, 구현체가 전혀 존재하지 않아도 인터페이스만으로 정적 팩토리 메소드를 작성할 수 있습니다.</p><h3 id=정적-팩토리-메소드의-단점>정적 팩토리 메소드의 단점<a hidden class=anchor aria-hidden=true href=#정적-팩토리-메소드의-단점>#</a></h3><ul><li><ol><li>상속에는 public 혹은 protected 생성자가 필요하므로 정적 팩토리 메소드만 제공할 경우 상속이 불가능하다.</li></ol></li><li><ol start=2><li>다른 개발자들이 정적팩토리 메소드를 찾기가 어렵다</li></ol></li></ul><h3 id=정적-팩토리-메소드-네이밍>정적 팩토리 메소드 네이밍<a hidden class=anchor aria-hidden=true href=#정적-팩토리-메소드-네이밍>#</a></h3><p>단점2를 보완하기 위해서 널리 알려진 규약을 통해서 정적 팩토리 메소드를 명명하는 것이 좋습니다. 이펙티브 자바에서 소개하는 정적 팩토리 메소드 네이밍 컨벤션은 아래와 같습니다.</p><ol><li><strong>from</strong></li></ol><p>매개변수 하나를 받아서 해당 타입의 인스턴스를 반환하는 형변환 메소드</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Date</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Date</span><span class=p>.</span><span class=na>from</span><span class=p>(</span><span class=n>instant</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li><strong>of</strong></li></ol><p>여러 매개변수를 받아서 적합한 타입의 인스턴스를 반환하는 집계 메소드</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Set</span><span class=o>&lt;</span><span class=n>Rank</span><span class=o>&gt;</span><span class=w> </span><span class=n>pockerCards</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>EnumSet</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>JACK</span><span class=p>,</span><span class=w> </span><span class=n>QUEEN</span><span class=p>,</span><span class=w> </span><span class=n>KING</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=3><li><strong>valueOf</strong></li></ol><p><code>from</code> 과 <code>of</code> 의 더 자세한 버젼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>BigInteger</span><span class=w> </span><span class=n>prime</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BigInteger</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>Integer</span><span class=p>.</span><span class=na>MAX_VALUE</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=4><li><strong>instance</strong> 혹은 <strong>getInstance</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>StackWalker</span><span class=w> </span><span class=n>luke</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>StackWalker</span><span class=p>.</span><span class=na>getInstance</span><span class=p>(</span><span class=n>options</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=5><li><strong>create</strong> 혹은 <strong>newInstance</strong></li></ol><p>instance 혹은 getInstance 와 비슷하지만, 매번 새로운 인스턴스를 생성하여 반환함을 보장합니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Object</span><span class=w> </span><span class=n>newArray</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Array</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>classObject</span><span class=p>,</span><span class=w> </span><span class=n>arrayLen</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=6><li><strong>getType</strong></li></ol><p>getInstance 와 같으나, 현재 클래스가 아닌 다른 클래스의 인스턴스를 생성할 때 사용합니다.
Type은 팩토리 메소드가 반활할 객체 타입을 적습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>FileStore</span><span class=w> </span><span class=n>fs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Files</span><span class=p>.</span><span class=na>getFileStore</span><span class=p>(</span><span class=n>path</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=7><li><strong>newType</strong></li></ol><p>createInstance 와 같으나, 현재 클래스가 아닌 다른 클래스의 인스턴스를 생성할 때 사용합니다.
Type은 팩토리 메소드가 반활할 객체 타입을 적습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>BufferedReader</span><span class=w> </span><span class=n>br</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Files</span><span class=p>.</span><span class=na>newBufferedReader</span><span class=p>(</span><span class=n>path</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=8><li><strong>type</strong></li></ol><p>getType 과 newType 의 간결한 버젼입니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Complaint</span><span class=o>&gt;</span><span class=w> </span><span class=n>litany</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Collections</span><span class=p>.</span><span class=na>list</span><span class=p>(</span><span class=n>legacyLitany</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>참고<ul><li><a href=https://velog.io/@cjh8746/%EC%A0%95%EC%A0%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9CStatic-Factory-Method>cjh8746.log - 정적 팩토리 메소드</a></li><li><a href=https://tjdtls690.github.io/studycontents/java/2023-01-30-static_factory_method_01/>Abel - 정적 팩토리 메소드</a></li><li><a href=https://hudi.blog/effective-java-static-factory-method/>Hudi - 정적 팩토리 메소드</a></li><li><a href=https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%EC%A0%95%EC%A0%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%83%9D%EC%84%B1%EC%9E%90-%EB%8C%80%EC%8B%A0-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90>인파 - 정적 팩토리 메소드</a></li></ul></li></ul><hr><h2 id=정적-팩토리-메소드를-사용하여-코드를-개선해보자>정적 팩토리 메소드를 사용하여 코드를 개선해보자<a hidden class=anchor aria-hidden=true href=#정적-팩토리-메소드를-사용하여-코드를-개선해보자>#</a></h2><blockquote><p>정적팩토리 메소드를 이용하여 샘플데이터 생성 코드 개선</p></blockquote><ul><li>샘플데이터 생성: 정적팩토리 메소드를 이용하여 콘서트와 콘서트일정, 콘서트좌석 을 초기화 해주는 코드</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a>
</span><span class=lnt id=hl-9-27><a class=lnlinks href=#hl-9-27>27</a>
</span><span class=lnt id=hl-9-28><a class=lnlinks href=#hl-9-28>28</a>
</span><span class=lnt id=hl-9-29><a class=lnlinks href=#hl-9-29>29</a>
</span><span class=lnt id=hl-9-30><a class=lnlinks href=#hl-9-30>30</a>
</span><span class=lnt id=hl-9-31><a class=lnlinks href=#hl-9-31>31</a>
</span><span class=lnt id=hl-9-32><a class=lnlinks href=#hl-9-32>32</a>
</span><span class=lnt id=hl-9-33><a class=lnlinks href=#hl-9-33>33</a>
</span><span class=lnt id=hl-9-34><a class=lnlinks href=#hl-9-34>34</a>
</span><span class=lnt id=hl-9-35><a class=lnlinks href=#hl-9-35>35</a>
</span><span class=lnt id=hl-9-36><a class=lnlinks href=#hl-9-36>36</a>
</span><span class=lnt id=hl-9-37><a class=lnlinks href=#hl-9-37>37</a>
</span><span class=lnt id=hl-9-38><a class=lnlinks href=#hl-9-38>38</a>
</span><span class=lnt id=hl-9-39><a class=lnlinks href=#hl-9-39>39</a>
</span><span class=lnt id=hl-9-40><a class=lnlinks href=#hl-9-40>40</a>
</span><span class=lnt id=hl-9-41><a class=lnlinks href=#hl-9-41>41</a>
</span><span class=lnt id=hl-9-42><a class=lnlinks href=#hl-9-42>42</a>
</span><span class=lnt id=hl-9-43><a class=lnlinks href=#hl-9-43>43</a>
</span><span class=lnt id=hl-9-44><a class=lnlinks href=#hl-9-44>44</a>
</span><span class=lnt id=hl-9-45><a class=lnlinks href=#hl-9-45>45</a>
</span><span class=lnt id=hl-9-46><a class=lnlinks href=#hl-9-46>46</a>
</span><span class=lnt id=hl-9-47><a class=lnlinks href=#hl-9-47>47</a>
</span><span class=lnt id=hl-9-48><a class=lnlinks href=#hl-9-48>48</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Concert.java</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Getter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Table</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=s>&#34;concerts&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequiredArgsConstructor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Concert</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>BaseEntity</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nd>@Builder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=kd>private</span><span class=w> </span><span class=nf>Concert</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>artistName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>this</span><span class=p>.</span><span class=na>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>this</span><span class=p>.</span><span class=na>artistName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>artistName</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Concert</span><span class=w> </span><span class=nf>of</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>artistName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>EmptyStringValidator</span><span class=p>.</span><span class=na>isEmptyString</span><span class=p>(</span><span class=n>name</span><span class=p>))</span><span class=w> </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BusinessException</span><span class=p>(</span><span class=n>SHOULD_NOT_EMPTY</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>EmptyStringValidator</span><span class=p>.</span><span class=na>isEmptyString</span><span class=p>(</span><span class=n>artistName</span><span class=p>))</span><span class=w> </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BusinessException</span><span class=p>(</span><span class=n>SHOULD_NOT_EMPTY</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=n>Concert</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>name</span><span class=p>(</span><span class=n>name</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>artistName</span><span class=p>(</span><span class=n>artistName</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Concert</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>artistName</span><span class=p>,</span><span class=w> </span><span class=n>LocalDate</span><span class=w> </span><span class=n>progressDate</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>place</span><span class=p>,</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>price</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>...(</span><span class=n>유효성</span><span class=w> </span><span class=n>검증로직</span><span class=w> </span><span class=n>생략</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// 콘서트 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>Concert</span><span class=w> </span><span class=n>concert</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Concert</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>artistName</span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 정적팩토리 메소드 활용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>concert</span><span class=p>.</span><span class=na>addConcertDate</span><span class=p>(</span><span class=n>progressDate</span><span class=p>,</span><span class=w> </span><span class=n>place</span><span class=p>,</span><span class=w> </span><span class=n>price</span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 연관객체 ConcertDate  생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=n>concert</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>addConcertDate</span><span class=p>(</span><span class=n>LocalDate</span><span class=w> </span><span class=n>progressDate</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>place</span><span class=p>,</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>price</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>...(</span><span class=n>유효성</span><span class=w> </span><span class=n>검증로직</span><span class=w> </span><span class=n>생략</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// 공연날짜 정보 추가</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ConcertDate</span><span class=w> </span><span class=n>newConcertDate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ConcertDate</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>this</span><span class=p>,</span><span class=w> </span><span class=n>progressDate</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=kc>true</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>place</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 정적팩토리 메소드 활용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// 해당날짜의 좌석 50개 초기화</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>newConcertDate</span><span class=p>.</span><span class=na>initializeSeats</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=w> </span><span class=n>price</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// 리스트에 날짜정보 추가</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>this</span><span class=p>.</span><span class=na>dates</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>newConcertDate</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22>22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23>23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24>24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25>25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26>26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27>27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28>28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29>29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30>30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31>31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32>32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33>33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34>34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35>35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36>36</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// ConcertDate.java</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Getter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Table</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=s>&#34;concert_dates&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequiredArgsConstructor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ConcertDate</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>BaseEntity</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nd>@Builder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=kd>private</span><span class=w> </span><span class=nf>ConcertDate</span><span class=p>(</span><span class=n>Concert</span><span class=w> </span><span class=n>concert</span><span class=p>,</span><span class=w> </span><span class=n>LocalDate</span><span class=w> </span><span class=n>progressDate</span><span class=p>,</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=n>isAvailable</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>place</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>this</span><span class=p>.</span><span class=na>concert</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>concert</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>this</span><span class=p>.</span><span class=na>progressDate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>progressDate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>this</span><span class=p>.</span><span class=na>isAvailable</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>isAvailable</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>this</span><span class=p>.</span><span class=na>place</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>place</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>ConcertDate</span><span class=w> </span><span class=nf>of</span><span class=p>(</span><span class=n>Concert</span><span class=w> </span><span class=n>concert</span><span class=p>,</span><span class=w> </span><span class=n>LocalDate</span><span class=w> </span><span class=n>progressDate</span><span class=p>,</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=n>isAvailable</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>place</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>concert</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BusinessException</span><span class=p>(</span><span class=n>NOT_NULLABLE</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>progressDate</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BusinessException</span><span class=p>(</span><span class=n>NOT_NULLABLE</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>if</span><span class=p>(</span><span class=n>EmptyStringValidator</span><span class=p>.</span><span class=na>isEmptyString</span><span class=p>(</span><span class=n>place</span><span class=p>))</span><span class=w> </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BusinessException</span><span class=p>(</span><span class=n>SHOULD_NOT_EMPTY</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=n>ConcertDate</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>concert</span><span class=p>(</span><span class=n>concert</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>progressDate</span><span class=p>(</span><span class=n>progressDate</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>isAvailable</span><span class=p>(</span><span class=n>isAvailable</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>place</span><span class=p>(</span><span class=n>place</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>initializeSeats</span><span class=p>(</span><span class=n>Concert</span><span class=w> </span><span class=n>concert</span><span class=p>,</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>price</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// 콘서트 좌석 50개를 만든다</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>seatNumber</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MIN_SEAT_NUMBER</span><span class=p>;</span><span class=w> </span><span class=n>seatNumber</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>MAX_SEAT_NUMBER</span><span class=w> </span><span class=p>;</span><span class=w> </span><span class=n>seatNumber</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>ConcertSeat</span><span class=w> </span><span class=n>concertSeat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ConcertSeat</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>concert</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>,</span><span class=w> </span><span class=n>seatNumber</span><span class=p>,</span><span class=w> </span><span class=n>price</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>this</span><span class=p>.</span><span class=na>seats</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>concertSeat</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>정적팩토리 메소드를 호출하여 샘플테스트 데이터셋을 쉽게 만들 수 있다.</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25>25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26>26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27>27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28>28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29>29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30>30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31>31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32>32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33>33</a>
</span><span class=lnt id=hl-11-34><a class=lnlinks href=#hl-11-34>34</a>
</span><span class=lnt id=hl-11-35><a class=lnlinks href=#hl-11-35>35</a>
</span><span class=lnt id=hl-11-36><a class=lnlinks href=#hl-11-36>36</a>
</span><span class=lnt id=hl-11-37><a class=lnlinks href=#hl-11-37>37</a>
</span><span class=lnt id=hl-11-38><a class=lnlinks href=#hl-11-38>38</a>
</span><span class=lnt id=hl-11-39><a class=lnlinks href=#hl-11-39>39</a>
</span><span class=lnt id=hl-11-40><a class=lnlinks href=#hl-11-40>40</a>
</span><span class=lnt id=hl-11-41><a class=lnlinks href=#hl-11-41>41</a>
</span><span class=lnt id=hl-11-42><a class=lnlinks href=#hl-11-42>42</a>
</span><span class=lnt id=hl-11-43><a class=lnlinks href=#hl-11-43>43</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 테스트코드</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>void</span><span class=w> </span><span class=nf>임시예약이_유효한상태에서_예약확정을_요청하면_상태변경에_성공된다</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// given</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>User</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=s>&#34;테스트&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>// 👈 정적팩토리메소드를 사용하여 테스트를 위한 유저 데이터 생성 및 초기화</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>Concert</span><span class=w> </span><span class=n>concert</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Concert</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=w> </span><span class=c1>// 👈 정적팩토리 메소드를 활용하여 테스트를 위한 콘서트/콘서트일정/콘서트좌석 데이터 생성 및 초기화</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=s>&#34;테스트 콘서트&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=s>&#34;테스트 아티스트&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>LocalDate</span><span class=p>.</span><span class=na>now</span><span class=p>(),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=s>&#34;테스트 장소&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>15000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ConcertDate</span><span class=w> </span><span class=n>concertDate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>concert</span><span class=p>.</span><span class=na>getDates</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=n>0</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ConcertSeat</span><span class=w> </span><span class=n>concertSeat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>concertDate</span><span class=p>.</span><span class=na>getSeats</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=n>0</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>assertTrue</span><span class=p>(</span><span class=n>concertSeat</span><span class=p>.</span><span class=na>isAvailable</span><span class=p>());</span><span class=w> </span><span class=c1>// 해당좌석은 예약가능</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;해당 좌석 임시예약 상태로 변경&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=kt>long</span><span class=w> </span><span class=n>reservationId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1L</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>Reservation</span><span class=w> </span><span class=n>reservation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Reservation</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=w> </span><span class=c1>// 👈 정적팩토리메소드를 사용하여 테스트를 위한 예약 데이터 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>user</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>concert</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>concertDate</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>concertSeat</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>assertDoesNotThrow</span><span class=p>(()</span><span class=o>-&gt;</span><span class=w> </span><span class=n>reservation</span><span class=p>.</span><span class=na>temporaryReserve</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>assertTrue</span><span class=p>(</span><span class=n>reservation</span><span class=p>.</span><span class=na>isTemporary</span><span class=p>());</span><span class=w> </span><span class=c1>// 임시예약상태</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>when</span><span class=p>(</span><span class=n>reservationRepository</span><span class=p>.</span><span class=na>findById</span><span class=p>(</span><span class=n>reservationId</span><span class=p>)).</span><span class=na>thenReturn</span><span class=p>(</span><span class=n>reservation</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// when</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;when: 임시예약이 유효일자가 만료된 상태에서 예약확정 상태로 변경을 요청한다&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ReservationInfo</span><span class=p>.</span><span class=na>Confirm</span><span class=w> </span><span class=n>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>assertDoesNotThrow</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>reservationService</span><span class=p>.</span><span class=na>confirm</span><span class=p>(</span><span class=n>ReservationCommand</span><span class=p>.</span><span class=na>Confirm</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>reservationId</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>assertTrue</span><span class=p>(</span><span class=n>info</span><span class=p>.</span><span class=na>reservation</span><span class=p>().</span><span class=na>isConfirm</span><span class=p>());</span><span class=w> </span><span class=c1>// 예약확정상태인지 확인</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>assertEquals</span><span class=p>(</span><span class=n>ReservationStatus</span><span class=p>.</span><span class=na>CONFIRMED</span><span class=p>,</span><span class=w> </span><span class=n>info</span><span class=p>.</span><span class=na>reservation</span><span class=p>().</span><span class=na>getStatus</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>assertNotNull</span><span class=p>(</span><span class=n>info</span><span class=p>.</span><span class=na>reservation</span><span class=p>().</span><span class=na>getReservedAt</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>assertNull</span><span class=p>(</span><span class=n>info</span><span class=p>.</span><span class=na>reservation</span><span class=p>().</span><span class=na>getTempReservationExpiredAt</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>assertFalse</span><span class=p>(</span><span class=n>concertSeat</span><span class=p>.</span><span class=na>isAvailable</span><span class=p>());</span><span class=w> </span><span class=c1>// 좌석은 예약불가능 상태인지 확인</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>컨트롤러->서비스로 계층별 DTO로 전환시켜서 전달</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RestController</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;concerts&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequiredArgsConstructor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ConcertController</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>ConcertApiDocs</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>ConcertService</span><span class=w> </span><span class=n>concertService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=c1>// 콘서트의 예약가능 날짜 목록조회</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/{id}/dates/list&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=kd>public</span><span class=w> </span><span class=n>ResponseEntity</span><span class=o>&lt;</span><span class=n>ApiResponse</span><span class=o>&lt;</span><span class=n>ConcertResponse</span><span class=p>.</span><span class=na>GetAvailableConcertDates</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=nf>getAvailableConcertDates</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nd>@PathVariable</span><span class=p>(</span><span class=s>&#34;id&#34;</span><span class=p>)</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nd>@RequestParam</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;page&#34;</span><span class=p>,</span><span class=w> </span><span class=n>required</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>,</span><span class=w> </span><span class=n>defaultValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;1&#34;</span><span class=p>)</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>page</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// 리스트를 반환</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ConcertInfo</span><span class=p>.</span><span class=na>GetConcertDateList</span><span class=w> </span><span class=n>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>concertService</span><span class=p>.</span><span class=na>getConcertDateList</span><span class=p>(</span><span class=n>ConcertCommand</span><span class=p>.</span><span class=na>GetConcertDateList</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>id</span><span class=p>));</span><span class=w> </span><span class=c1>// 👈 정적팩토리 메소드를 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// 페이징처리를 한다</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>Page</span><span class=o>&lt;</span><span class=n>ConcertDate</span><span class=o>&gt;</span><span class=w> </span><span class=n>concertDatePage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PaginationUtils</span><span class=p>.</span><span class=na>toPage</span><span class=p>(</span><span class=n>info</span><span class=p>.</span><span class=na>concertDates</span><span class=p>(),</span><span class=w> </span><span class=n>page</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>// 페이징처리 결과를 응답데이터에 넣고 응답한다</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=n>ApiResponseEntity</span><span class=p>.</span><span class=na>ok</span><span class=p>(</span><span class=n>ConcertResponse</span><span class=p>.</span><span class=na>GetAvailableConcertDates</span><span class=p>.</span><span class=na>from</span><span class=p>(</span><span class=n>concertDatePage</span><span class=p>));</span><span class=w> </span><span class=c1>// 👈 정적팩토리 메소드를 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h2 id=결론>결론<a hidden class=anchor aria-hidden=true href=#결론>#</a></h2><p>객체는 각자 책임과 역할을 갖고 있습니다. 목적에 맞게 객체의 책임과 역할을 활용하려면 객체의 생성이 필요합니다.
하지만 생성자를 호출하게되면 서론에서 소개한 문제처럼 객체가 필요할 때마다 <code>new</code> 연산자로 생성자를 직접 호출하게되면 생성자 호출로인해서 코드의 가독성이 떨어지게되는걸 직접 경험해봤습니다.</p><p>각 도메인이 갖는 책임과 역할을 객체지향스럽게 해야된다면 이펙티브자바 도서를 한번쯤은 읽어보고, 읽은 내용을 바탕으로 예제코드를 작성하면서 나만의 언어로 정의하는 연습을 해봐야될 거 같습니다.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://loveAlakazam.github.io/blog/docs/rdbms-index/><span class=title>« Prev</span><br><span>RDBMS(Mysql)에서의 인덱스 개념 정리</span>
</a><a class=next href=https://loveAlakazam.github.io/blog/docs/upgrade-architect/><span class=title>Next »</span><br><span>아키텍쳐 고민하기</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://loveAlakazam.github.io/blog/>EK Dev Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
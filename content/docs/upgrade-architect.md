---
title: "아키텍쳐 고민하기"
date: "2025-04-05"
draft: false
---

## ERD 개선하기

> 보완피드백1: 유저와 토큰 테이블 분리하기

> 보완피드백2: 테이블의 역할을 고민해서 만들기
>
> - payments 라는 엔티티에 금액정보가 없어서 책임을 다하지 못할 수 있음.

### 2차 설계안 고민포인트

- 대기열토큰의 대기순서를 나타내려면, 토큰테이블에 대기순서를 기재하는게 좋을까요?
- 아니면 대기열큐를 하나의 테이블로 나타내어 대기순서를 기재하는게 좋을까요?

멀티스레드의 동시성을 고려하게될텐데 여기서는 대기열이 동시성을 담당하는거 같습니다. 계속 대기열도 테이블로 나타내려고하는데 아직도 혼란이 남은거같아 질문을 드립니다.

### 설계를 하면서 깨달은 설계에 대한 나의 철학

1. Seat 테이블에 왜 price 컬럼이 있나요?

콘서트나 뮤지컬 연극의 경우에는 좌석에 따라 가격이 다르기 때문입니다. 영화관의경우에는 좌석별 자리보다는 영화관이 어떤 장소냐(4DX, 일반 2D, 3D 등)에 따라 가격이 다른편입니다. 실제 사례를 봤을때 콘서트의 경우에는 영화관처럼 모든 좌석의 가격을 동일하게 하는 것보다는 좌석마다 가격을 다르게하는 방안으로 선택했습니다.

---

## 시퀀스 다이어그램

> 보완피드백 1: 비즈니스 로직의 이해를 높이고자 시퀀스 다이어그램에서 적절한 상태임을 가정하는 케이스가 많은데, 핵심 예외에 대해서는 시퀀스 다이어그램에 표현

> 보완피드백 2: 좌석예약 요청 API에서 예약서비스에 콘서트 좌석의 상태 확인을 요청하는데 예약서비스에서 해당 구현이 가능한지 다시 생각해보기.

---

## 플로우차트

> 보완피드백 1: 전체적인 흐름은 시퀀스다이어그램보다 플로우차트로 나타내기
